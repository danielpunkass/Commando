/*************************************************************************************************//* Copyright 2005 Shane D. Looker.                                                               *//*                                                                                               *//* This source code is being made available as free sample code as is. No warantee, express or   *//* implied is made as to the quality or correctness of this code.                                *//* This source code may be freely distributed as long as this copyright notice remains attached. *//* Check http://www.MacCommando.com for updated source.                                          *//*************************************************************************************************/#import "CmdoCheckbox.h"@implementation CmdoCheckbox- (id) initWithArray: (NSMutableArray*) controlInfo{	self = [super init];	mControlInfo = controlInfo;	NSButton* aButton = [NSButton new];	int	theTag = [self nextTag];	[aButton setTag: theTag];	[aButton setButtonType: NSSwitchButton];	[aButton setTitle: [controlInfo objectAtIndex: kCmdoControlLabel]];	[aButton sizeToFit];	mRect = [aButton frame];	[aButton setToolTip: [controlInfo objectAtIndex: kCmdoControlToolTipText]];	[aButton setAction: @selector(checkboxHandler:)];	[aButton setTarget: self];	[controlInfo replaceObjectAtIndex: 0 withObject: aButton];	// Save off the reference to the button	mControl = aButton;	[gAllOptionControls setObject: controlInfo forKey: [NSNumber numberWithInt: [aButton tag]]];		return self;}// This method handles a click in the checkbox and sets the entry in the substitution// dictionary to either a null string (checkbox off) or to the substituion value from the// data array.- (void) checkboxHandler: (id) sender{	NSButton*	theSender = sender;		NSString	*matchStr;	NSString	*subsStr;	NSMutableArray	*dataArray = [gAllOptionControls objectForKey: [NSNumber numberWithInt:[sender tag]]];		if (dataArray != nil)	// If not dataArray found, we don't do anything	{		matchStr = [dataArray objectAtIndex: kCmdoPrototypeMatch];		if ([theSender state] == NSOnState)		{			subsStr = [dataArray objectAtIndex: kCmdoFlagLiteralSubs];		}		else 		{			subsStr = @"";		}		NSString *subsKey = [CmdoControl makeSubstitutionKey: matchStr];		[gSubstitutionDictionary setObject: subsStr forKey: subsKey];	}		[mParent displayCommandLine];}/*- (id) copyWithZone: (NSZone*) zone{	CmdoCheckbox *aCopy = (CmdoCheckbox *) [super copyWithZone: zone];	aCopy->mControlInfo = [mControlInfo retain];	return aCopy;}*/@end